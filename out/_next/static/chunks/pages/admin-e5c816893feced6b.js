(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{5540:function(e,t,n){"use strict";var r=n(29),s=n(4687),a=n.n(s),c=n(7294),u=n(1163),i=n(5121),o=n(8165),l=n(143),d=n(5893);t.Z=function(e){var t=e.children,n=(0,c.useState)(!1),s=n[0],f=n[1],p=(0,c.useContext)(l.S)[0],h=(0,u.useRouter)();function x(){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/current-user");case 3:console.log("data wooo =>",t=e.sent.data),t.success&&f(!0),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),f(!1),h.push("/login");case 14:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}return(0,c.useEffect)(function(){p&&p.token&&x()},[p,p.token]),null===p&&setTimeout(function(){return x()},1e3),s?(0,d.jsx)(d.Fragment,{children:t}):(0,d.jsx)(o.Z,{spin:!0,className:"d-flex justify-content-center display-1 text-primary p-5"})}},7567:function(e,t,n){"use strict";n.r(t);var r=n(29),s=n(4687),a=n.n(s),c=n(7294),u=n(1163),i=n(143),o=n(5540),l=n(5121),d=n(2920),f=n(8341),p=n.n(f),h=n(5893);t.default=function(){var e,t,n=(0,c.useContext)(i.S),s=n[0];n[1];var f=(0,c.useState)([]),x=f[0],m=f[1];(0,u.useRouter)(),s.user,s.people;var v=(0,c.useState)(0);v[0],v[1];var w=(0,c.useState)(1);w[0],w[1],(0,c.useEffect)(function(){s&&s.token&&j()},[s&&s.token]);var j=(e=(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.get("/posts");case 3:m(e.sent.data.posts),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(){return e.apply(this,arguments)}),k=(t=(0,r.Z)(a().mark(function e(t){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Are you sure?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,l.Z.delete("/admin/delete-post/".concat(t._id));case 6:e.sent.data,d.Am.error("Post deleted"),j(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])})),function(e){return t.apply(this,arguments)});return(0,h.jsx)(o.Z,{children:(0,h.jsxs)("div",{className:"container-fluid",children:[(0,h.jsx)("div",{className:"row py-5 text-light bg-default-image",children:(0,h.jsxs)("div",{className:"col text-center",children:[(0,h.jsx)("h1",{className:"display-4",children:"Admin"}),(0,h.jsxs)("h2",{className:"",children:["Hello ",s.user&&s.user.name]})]})}),(0,h.jsx)("div",{className:"row py-4",children:(0,h.jsx)("div",{className:"col-md-8 offset-md-2",children:x.map(function(e){return(0,h.jsxs)("div",{className:"mt-5 d-flex justify-content-between",children:[(0,h.jsx)("div",{children:p()(e.content)}),(0,h.jsxs)("div",{onClick:function(){return k(e)},className:"text-danger float-right pointer",children:[(0,h.jsx)("i",{className:"fa fa-trash"}),"delete"]})]},e._id)})})})]})})}},4830:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return n(7567)}])}},function(e){e.O(0,[451,774,888,179],function(){return e(e.s=4830)}),_N_E=e.O()}]);